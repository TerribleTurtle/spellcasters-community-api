# Spellcasters Community API (Free & Open)

**A free, open-source API for Spellcasters Chronicles.**

> [!NOTE]
> **EARLY ACCESS:** Current data reflects the **Early Access** phase.
> Schema and data updates will follow game patches.

This project is a collaborative tool for **developers** (building apps/tools) and the **community** (wiki editors/fans).
It is **free to use** and **open for anyone to contribute**.

## üìö Documentation

Please refer to [CONTRIBUTING.md](CONTRIBUTING.md) to learn how to:

- Use this data in your own projects
- Add new data (heroes, spells, units, and more)
- Fix typos

## üí¨ Community

This project is a fan-made initiative.

- **Looking for the game devs?** [Join the Official Game Discord](https://discord.com/invite/spellcasters-chronicles-1425209254847058003).
- **Want to help with this API?** Check out [CONTRIBUTING.md](CONTRIBUTING.md).

## üåê Live API Usage

**Base URL:** `https://terribleturtle.github.io/spellcasters-community-api/api/v2/`

Developers should use this base URL to fetch data for their applications.

- **Landing Page:** [View Live Site](https://terribleturtle.github.io/spellcasters-community-api/)
- **System:**
  - [status.json](https://terribleturtle.github.io/spellcasters-community-api/api/v2/status.json) - API Health & Version Info
  - [game_config.json](https://terribleturtle.github.io/spellcasters-community-api/api/v2/game_config.json) - Game Version & Metadata
- **Collections:**
  - [heroes.json](https://terribleturtle.github.io/spellcasters-community-api/api/v2/heroes.json)
  - [units.json](https://terribleturtle.github.io/spellcasters-community-api/api/v2/units.json)
  - [spells.json](https://terribleturtle.github.io/spellcasters-community-api/api/v2/spells.json)
  - [titans.json](https://terribleturtle.github.io/spellcasters-community-api/api/v2/titans.json)
  - [consumables.json](https://terribleturtle.github.io/spellcasters-community-api/api/v2/consumables.json)
  - [upgrades.json](https://terribleturtle.github.io/spellcasters-community-api/api/v2/upgrades.json)
  - [infusions.json](https://terribleturtle.github.io/spellcasters-community-api/api/v2/infusions.json) - Elemental Infusion Definitions

### üì¶ Patch History API

The API now hosts patch history data generated by the management tools.

| File                    | Consumer       | Use Case                      |
| ----------------------- | -------------- | ----------------------------- |
| `patches.json`          | Developer      | The raw source of truth array |
| `changelog_index.json`  | All consumers  | Pagination manifest           |
| `changelog.json`        | Full card page | Patch-over-patch comparison   |
| `changelog_latest.json` | Card popup     | Quick "what changed" summary  |
| `timeline/{id}.json`    | Full card page | Per-entity stat history       |

> **Inline Stat Changes:** Collection endpoints (`heroes.json`, `units.json`, etc.) now include an optional `stat_changes` array on entities that have been modified across versions. This provides field-level diffs (`old`/`new` values) directly in the entity payload, eliminating the need for separate timeline lookups.

> **CORS Note:** GitHub Pages serves `Access-Control-Allow-Origin: *` by default, so these files are ready for consumption by Vercel/Netlify apps without extra configuration.

### üåü API in Action

Check out [SpellcastersDB](https://www.spellcastersdb.com/), a community-built database and deckbuilder powered by this API!

Full endpoint documentation is available in [CONTRIBUTING.md](CONTRIBUTING.md).

## üöÄ Quick Start (Local Build)

1.  **Install Python 3.11+**
2.  **Install Dependencies:**
    ```bash
    pip install -r requirements.txt
    ```
3.  **Build & Verify:**

    ```bash
    python scripts/validate_integrity.py
    python scripts/verify_strictness.py
    python scripts/build_audit_log.py
    python scripts/build_changelogs.py
    python scripts/build_api.py
    ```

    > üí° **Shortcut:** Run `bash scripts/check.sh` (Linux/Mac) or `.\\scripts\\check.ps1` (Windows) to execute all validation and tests at once.

    See `api/v2/units.json`

4.  **Run Tests:**

    ```bash
    python scripts/validate_integrity.py
    python -m pytest -v
    ```

5.  **Frontend Tooling (Optional):**

    If you are modifying the browser-based schema validator (`schema-validator.js`), you may need to update the bundled dependencies using Node.js:
    
    ```bash
    npm install
    npx browserify build_ajv.js -o ajv2019.bundle.js
    ```

> üí° **Tip:** For detailed documentation on all python helper tools, CI scripts, and environment variables, see [`scripts/README.md`](scripts/README.md).

## ü§ù Contributing

This project is built by the community, for the community. **Anyone is free to contribute!**

Please read [CONTRIBUTING.md](CONTRIBUTING.md) for details.

- **Found a typo?** Reference the [Quick Fix Guide](CONTRIBUTING.md#%E2%9A%A1-quick-fix-typos--small-edits).
- **Adding data?** See the [Advanced Guide](CONTRIBUTING.md#%F0%9F%9B%A0%EF%B8%8F-advanced-adding-new-data).

## üåê Ecosystem

This API is the data backbone for the Spellcasters community tools:

| Project                        | Role                                        | Link                                                                                            |
| ------------------------------ | ------------------------------------------- | ----------------------------------------------------------------------------------------------- |
| **Spellcasters Community API** | Data source (this repo)                     | You are here                                                                                    |
| **SpellcastersDB**             | Public database & deckbuilder               | [GitHub](https://github.com/TerribleTurtle/spellcastersdb) ‚Ä¢ [Live](https://spellcastersdb.com) |
| **The Grimoire (Manager)**     | Operator tool ‚Äî edit data & publish patches | [GitHub](https://github.com/TerribleTurtle/spellcasters-manager)                                |
| **Spellcasters Bot**           | Discord bot ‚Äî search & lookup commands      | [GitHub](https://github.com/TerribleTurtle/spellcasters-bot)                                    |

**Data flows:** The Grimoire edits data and publishes to this API ‚Üí SpellcastersDB and the Discord Bot consume this API for live data.

## üìÑ License

This project is open source under the [MIT License](LICENSE).

### ‚ö†Ô∏è Legal & IP Disclaimer

> [!IMPORTANT] > **Spellcasters Chronicles** is a trademark of **Quantic Dream**.

This project is a community-maintained tool and is **not** affiliated with, endorsed by, or sponsored by Quantic Dream.

- **Code:** The source code of this API builder is licensed under the MIT License.
- **Assets & Data:** All game images, icons, names, and lore are the intellectual property of the game developers. They are used here for educational/informational purposes under standard Fan Content principles.
- **Fan Content Policy:** Users of this API must respect the IP rights of the original creators.
- **Assets:** Game images. See [CONTRIBUTING.md](CONTRIBUTING.md#%F0%9F%8E%A8-artist-or-lorekeeper) for submission rules.
- **Data:** Game data is collected by the community and may not reflect the latest live game state.

### ‚ö†Ô∏è Data Accuracy Disclaimer

While we strive for accuracy, this API is maintained by volunteers. Data is entered manually and may contain errors. **Do not** use this data for financial decisions or competitive play without verifying it in-game.

### üõ°Ô∏è Security Disclaimer

This API provides **raw data** from community contributions.
**Developers:** You MUST sanitize this data before rendering it in your applications. Treating descriptions or text fields as trusted HTML may expose your users to Cross-Site Scripting (XSS) attacks.

## üìÇ Structure

- `data/`: Source JSON files (edits happen here).
- `assets/`: Images.
- `api/`: Generated API output (Do not edit manually).
- `schemas/`: JSON Schemas (v2).
- `scripts/`: Build and validation tools.
- `docs/`: Guides and reference documentation.
- `types/`: TypeScript definitions.
